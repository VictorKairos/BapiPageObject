"use strict";

var webdriver = require('selenium-webdriver');

var driver = new webdriver.Builder().
    withCapabilities(webdriver.Capabilities.chrome()).build();

var Eyes = require('eyes.selenium').Eyes;
eyes.setApiKey(process.env.APPLITOOLS_API_KEY);

var LogHandler = require('eyes.selenium').ConsoleLogHandler;
eyes.setLogHandler(new LogHandler(true));
eyes.open(driver, "JavaScript SDK", "Elements and Frames example", {width: 800, height: 560}).then(function (driver) {
    driver.get('https://github.com');
    eyes.checkWindow("Initial");
    // eyes.checkElementBy(By.id("overflowing-div"), null, "Initial");
    // eyes.checkRegionInFrame("frame1", By.id("inner-frame-div"), null, "Inner frame div", true);
    // eyes.checkElementBy(By.id("overflowing-div-image"), null, "minions");
    return eyes.close(false);
}).then(function (results) {
    console.log("then results: ", results);
    driver.quit();
}, function (err) {
    console.error("error results: ", err);
    driver.quit();
    eyes.abortIfNotClosed();
});